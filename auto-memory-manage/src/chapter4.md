# 虚拟机性能监控-故障处理工具

## 概述

- 给一个系统定位问题的时候
    - 知识,经验是关键基础
    - 数据是依据
    - 工具是运用知识处理数据的手段
        - 异常堆栈
        - 虚拟机运行日志
        - 垃圾收集器日志
        - 线程快照(threadDump/javaCore文件)
        - 堆转储快照(heapDump/hprof文件)
        - 等

## 基础故障处理工具

- JDK自带的工具(bin目录)
    - 商业授权工具
        - 主要是JMC及它要使用到的JFR
    - 正式支持工具
        - 这一类工具属于被长期支持的工具
        - 不同平台,不同版本的JDK之间,这类工具可能会略有差异,但是不会出现某一个工具突然消失的情况
    - 实验性工具
        - 这一类工具在它们的使用说明中被声明为没有技术支持,实验性质的
        - 事实上它们通常都非常稳定而且功能强大,也能在处理应用程序性能问题,定位故障时发挥很大的作用

- JMX的开启
    - 工作中需要监控运行于JDK5的虚拟机的程序,需要启动时新增"-Dcom.sun.management.jmxremote"
    - 监控程序运行于JDK6或以上版本的虚拟机之上,那JMX管理默认是开启的,虚拟机启动时无须再添加任何参数

### jps:虚拟机进程状况工具

- 类似于PS命令,查看进程情况
    - 可以列出正在运行的虚拟机进程
    - 显示虚拟机执行主类(Main Class,main()函数所在的类)名称以及这些进程的本地虚拟机唯一ID(LVMID，Local Virtual Machine Identifier)